apiVersion: v1
kind: Pod
metadata:
  labels:
    pod: hpc
  name: hpc
spec:
  securityContext:
    windowsOptions:
      hostProcess: true
      runAsUserName: "NT AUTHORITY\\SYSTEM"
  hostNetwork: true
  containers:
    - name: hpc
      image: wcontainertestregistry.azurecr.io/monagent:v10
      imagePullPolicy: IfNotPresent
      command: ["powershell"]
      args:  ["./startMonagent.ps1", "<managedidentityresourceid>", <subscription>", "<resourcegroup>", "<clustername>", "1.19"]
  nodeSelector:
    "kubernetes.io/os": windows
